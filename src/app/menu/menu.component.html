<!-- src/app/menu/menu.component.html -->
<div class="sidebar">
  <!-- Header -->
  <div class="logo-details">
    <i class="bx bxl-c-plus-plus icon"></i>
    <div class="logo_name">VaBanQ ERP</div>
  </div>

  <ul class="nav-list">
    <!-- Search -->
    <li>
      <i class="bx bx-search"></i>
      <input type="text"
             placeholder="Search..."
             [(ngModel)]="searchTerm"
             (input)="onSearch($event)"/>
      <span class="tooltip">Search</span>
    </li>

    <!-- Dashboard -->
    <li>
      <a routerLink="/dashboard"
         routerLinkActive="active"
         [routerLinkActiveOptions]="{ exact: true }"
         (click)="onItemClick('/dashboard')">
        <i class="bx bx-grid-alt"></i>
        <span class="links_name">Dashboard</span>
      </a>
      <span class="tooltip">Dashboard</span>
    </li>

    <!-- Products Category -->
    <li class="category">
      <a (click)="toggleCategory('products')"
         [class.active]="isRouteActive('/items') || isRouteActive('/add-item') || isRouteActive('/wms') || isRouteActive('/generate-eans')">
        <i class="bx bx-cube"></i>
        <span class="links_name">Produkty</span>
        <i class="bx bx-chevron-down arrow"
           [class.rotate]="subcategories['products']"></i>
      </a>
      <span class="tooltip">Produkty</span>
    </li>

    <ul class="subcategories"
        [class.show]="subcategories['products']"
        [@slideInOut]="subcategories['products'] ? 'in' : 'out'">
      <li>
        <a routerLink="/items"
           routerLinkActive="active"
           [routerLinkActiveOptions]="{ exact: true }"
           (click)="onItemClick('/items')">
          <i class="bx bx-list-ul"></i>
          <span class="links_name">Lista produktów</span>
        </a>
        <span class="tooltip">Lista produktów</span>
      </li>
      <li>
        <a routerLink="/add-item"
           routerLinkActive="active"
           [routerLinkActiveOptions]="{ exact: true }"
           (click)="onItemClick('/add-item')">
          <i class="bx bx-plus-circle"></i>
          <span class="links_name">Stwórz produkt</span>
        </a>
        <span class="tooltip">Stwórz nowy produkt</span>
      </li>
      <li>
        <a routerLink="/wms"
           routerLinkActive="active"
           [routerLinkActiveOptions]="{ exact: true }"
           (click)="onItemClick('/wms')">
          <i class="bx bx-package"></i>
          <span class="links_name">Stany magazynowe</span>
        </a>
        <span class="tooltip">Stany magazynowe</span>
      </li>
      <li>
        <a routerLink="/generate-eans"
           routerLinkActive="active"
           [routerLinkActiveOptions]="{ exact: true }"
           (click)="onItemClick('/generate-eans')">
          <i class="bx bx-barcode"></i>
          <span class="links_name">Generowanie EAN</span>
        </a>
        <span class="tooltip">Generowanie EAN</span>
      </li>
    </ul>

    <!-- Auctions Category -->
    <li class="category">
      <a (click)="toggleCategory('auctions')"
         [class.active]="isRouteActive('/offers') || isRouteActive('/orders')">
        <i class="bx bx-store"></i>
        <span class="links_name">Aukcje</span>
        <i class="bx bx-chevron-down arrow"
           [class.rotate]="subcategories['auctions']"></i>
      </a>
      <span class="tooltip">Aukcje</span>
    </li>

    <ul class="subcategories"
        [class.show]="subcategories['auctions']"
        [@slideInOut]="subcategories['auctions'] ? 'in' : 'out'">
      <li>
        <a routerLink="/offers"
           routerLinkActive="active"
           [routerLinkActiveOptions]="{ exact: true }"
           (click)="onItemClick('/offers')">
          <i class="bx bx-shopping-bag"></i>
          <span class="links_name">Oferty</span>
        </a>
        <span class="tooltip">Oferty</span>
      </li>
      <li>
        <a routerLink="/orders"
           routerLinkActive="active"
           [routerLinkActiveOptions]="{ exact: true }"
           (click)="onItemClick('/orders')">
          <i class="bx bx-cart"></i>
          <span class="links_name">Zamówienia</span>
        </a>
        <span class="tooltip">Zamówienia</span>
      </li>
    </ul>

    <!-- Accounting Category -->
    <li class="category">
      <a (click)="toggleCategory('accounting')"
         [class.active]="isRouteActive('/accounting')">
        <i class="bx bx-calculator"></i>
        <span class="links_name">Księgowość</span>
        <i class="bx bx-chevron-down arrow"
           [class.rotate]="subcategories['accounting']"></i>
      </a>
      <span class="tooltip">Księgowość</span>
    </li>

    <ul class="subcategories"
        [class.show]="subcategories['accounting']"
        [@slideInOut]="subcategories['accounting'] ? 'in' : 'out'">
      <li>
        <a routerLink="/accounting/dashboard"
           routerLinkActive="active"
           [routerLinkActiveOptions]="{ exact: true }"
           (click)="onItemClick('/accounting/dashboard')">
          <i class="bx bx-tachometer"></i>
          <span class="links_name">Dashboard</span>
        </a>
        <span class="tooltip">Dashboard księgowości</span>
      </li>
      <li>
        <a routerLink="/accounting/invoices"
           routerLinkActive="active"
           [routerLinkActiveOptions]="{ exact: true }"
           (click)="onItemClick('/accounting/invoices')">
          <i class="bx bx-receipt"></i>
          <span class="links_name">Faktury</span>
        </a>
        <span class="tooltip">Faktury</span>
      </li>
      <li>
        <a routerLink="/accounting/expenses"
           routerLinkActive="active"
           [routerLinkActiveOptions]="{ exact: true }"
           (click)="onItemClick('/accounting/expenses')">
          <i class="bx bx-money"></i>
          <span class="links_name">Koszty</span>
        </a>
        <span class="tooltip">Koszty</span>
      </li>
    </ul>

    <!-- Integrations -->
    <li class="integrations-section">
      <a (click)="toggleCategory('integrations')"
         [class.active]="activeIntegrations">
        <i class="bx bx-link-alt"></i>
        <span class="links_name">Integracje</span>
        <i class="bx bx-chevron-down arrow"
           [class.rotate]="subcategories['integrations']"></i>
      </a>
      <span class="tooltip">Integracje</span>
    </li>

    <ul class="subcategories"
        [class.show]="subcategories['integrations']"
        [@slideInOut]="subcategories['integrations'] ? 'in' : 'out'">
      <li>
        <div class="integration-item" (click)="onAllegroClick()">
          <div class="integration-info">
            <i class="bx bxl-shopify"></i>
            <span class="links_name">Allegro</span>
          </div>
          <div class="allegro-status-indicator"
               [ngClass]="getAllegroStatusClass()"
               [title]="getAllegroStatusTooltip()">
            <div class="status-dot"></div>
          </div>
        </div>
        <span class="tooltip">{{ getAllegroStatusTooltip() }}</span>
      </li>
    </ul>

    <!-- Settings -->
    <li>
      <a routerLink="/settings"
         routerLinkActive="active"
         [routerLinkActiveOptions]="{ exact: true }"
         (click)="onItemClick('/settings')">
        <i class="bx bx-cog"></i>
        <span class="links_name">Ustawienia</span>
      </a>
      <span class="tooltip">Ustawienia</span>
    </li>

    <!-- Profile -->
    <li class="profile">
      <div class="profile-details" (click)="toggleProfileMenu()">
        <div class="profile-avatar">
          <i class="bx bx-user"></i>
        </div>
        <div class="name_job">
          <div class="name">{{userProfile?.firstName! + " " + userProfile?.lastName!}}</div>
          <div class="job">{{userProfile?.email!}}</div>
        </div>
        <i class="bx bx-chevron-down profile-arrow"
           [class.rotate]="showProfileMenu"></i>
      </div>

      <div class="profile-menu"
           [class.show]="showProfileMenu"
           [@slideInOut]="showProfileMenu ? 'in' : 'out'">
        <div class="profile-menu-item" (click)="viewProfile()">
          <i class="bx bx-user"></i>
          <span>Profil</span>
        </div>
        <div class="profile-menu-item" (click)="logout()">
          <i class="bx bx-log-out"></i>
          <span>Wyloguj</span>
        </div>
      </div>
    </li>
  </ul>
</div>
